-- Auto-generated teleport destination fixups (from TVP map)
local TELEPORT_ID = 1387
local FIXES = {
    {pos = Position(32082, 32171, 9), dest = Position(32090, 32172, 9), reason = 'DIFF', ots = Position(32088, 32171, 9)},
    {pos = Position(32089, 32171, 9), dest = Position(32081, 32172, 9), reason = 'DIFF', ots = Position(32082, 32171, 9)},
    {pos = Position(32107, 31566, 9), dest = Position(32189, 31625, 4), reason = 'DIFF', ots = Position(32188, 31623, 8)},
    {pos = Position(32176, 31864, 15), dest = Position(32176, 31870, 15), reason = 'MISSING_IN_OTS', ots = Position(0, 0, 0)},
    {pos = Position(32177, 31864, 15), dest = Position(32177, 31870, 15), reason = 'MISSING_IN_OTS', ots = Position(0, 0, 0)},
    {pos = Position(32187, 31622, 8), dest = Position(32107, 31567, 9), reason = 'DIFF', ots = Position(32108, 31567, 9)},
    {pos = Position(32208, 32433, 10), dest = Position(32167, 32438, 9), reason = 'DIFF', ots = Position(32166, 32437, 9)},
    {pos = Position(32212, 32433, 10), dest = Position(32281, 32389, 10), reason = 'DIFF', ots = Position(32281, 32388, 10)},
    {pos = Position(32234, 32502, 10), dest = Position(32167, 32438, 9), reason = 'DIFF', ots = Position(32210, 32437, 10)},
    {pos = Position(32259, 31847, 15), dest = Position(32245, 31891, 14), reason = 'MISSING_IN_OTS', ots = Position(0, 0, 0)},
    {pos = Position(32259, 31858, 15), dest = Position(32312, 31974, 13), reason = 'MISSING_IN_OTS', ots = Position(0, 0, 0)},
    {pos = Position(32262, 31889, 10), dest = Position(32259, 31892, 10), reason = 'MISSING_IN_OTS', ots = Position(0, 0, 0)},
    {pos = Position(32266, 31863, 12), dest = Position(32259, 31892, 10), reason = 'DIFF', ots = Position(32265, 31859, 12)},
    {pos = Position(32267, 31847, 15), dest = Position(32275, 31905, 13), reason = 'MISSING_IN_OTS', ots = Position(0, 0, 0)},
    {pos = Position(32267, 31858, 15), dest = Position(32186, 31938, 14), reason = 'MISSING_IN_OTS', ots = Position(0, 0, 0)},
    {pos = Position(32274, 31847, 15), dest = Position(32171, 31855, 15), reason = 'MISSING_IN_OTS', ots = Position(0, 0, 0)},
    {pos = Position(32274, 31858, 15), dest = Position(32216, 31846, 15), reason = 'MISSING_IN_OTS', ots = Position(0, 0, 0)},
    {pos = Position(32400, 31656, 15), dest = Position(32492, 31697, 7), reason = 'DIFF', ots = Position(32493, 31697, 7)},
    {pos = Position(32476, 31904, 3), dest = Position(32476, 31904, 4), reason = 'MISSING_IN_OTS', ots = Position(0, 0, 0)},
    {pos = Position(32476, 31904, 5), dest = Position(32476, 31904, 6), reason = 'MISSING_IN_OTS', ots = Position(0, 0, 0)},
    {pos = Position(32479, 31904, 2), dest = Position(32479, 31904, 3), reason = 'MISSING_IN_OTS', ots = Position(0, 0, 0)},
    {pos = Position(32481, 31904, 4), dest = Position(32481, 31904, 5), reason = 'MISSING_IN_OTS', ots = Position(0, 0, 0)},
    {pos = Position(32481, 31905, 1), dest = Position(32480, 31905, 2), reason = 'MISSING_IN_OTS', ots = Position(0, 0, 0)},
    {pos = Position(32526, 32155, 12), dest = Position(32554, 32212, 11), reason = 'DIFF', ots = Position(32554, 32211, 11)},
    {pos = Position(32554, 32213, 11), dest = Position(32526, 32156, 12), reason = 'DIFF', ots = Position(32526, 32157, 12)},
    {pos = Position(32676, 32100, 8), dest = Position(32660, 32113, 8), reason = 'DIFF', ots = Position(32660, 32109, 8)},
    {pos = Position(32794, 31576, 5), dest = Position(32812, 31577, 5), reason = 'MISSING_IN_OTS', ots = Position(0, 0, 0)},
    {pos = Position(32812, 31576, 5), dest = Position(32794, 31577, 5), reason = 'MISSING_IN_OTS', ots = Position(0, 0, 0)},
    {pos = Position(32874, 31955, 11), dest = Position(32874, 31953, 12), reason = 'DIFF', ots = Position(32874, 31955, 12)},
    {pos = Position(33052, 32779, 14), dest = Position(33133, 32642, 8), reason = 'DIFF', ots = Position(33133, 32642, 7)},
    {pos = Position(33070, 31620, 14), dest = Position(33070, 31620, 15), reason = 'DIFF', ots = Position(33070, 31624, 15)},
    {pos = Position(33083, 32569, 14), dest = Position(33080, 32569, 13), reason = 'DIFF', ots = Position(33083, 32570, 13)},
    {pos = Position(33083, 32609, 14), dest = Position(33131, 32566, 8), reason = 'DIFF', ots = Position(33056, 32635, 14)},
    {pos = Position(33109, 33009, 14), dest = Position(33204, 32956, 14), reason = 'DIFF', ots = Position(33206, 32956, 14)},
    {pos = Position(33117, 32627, 15), dest = Position(33193, 32664, 15), reason = 'DIFF', ots = Position(33179, 32665, 15)},
    {pos = Position(33120, 32811, 15), dest = Position(33085, 32781, 14), reason = 'DIFF', ots = Position(33086, 32781, 14)},
    {pos = Position(33124, 32759, 14), dest = Position(33133, 32642, 8), reason = 'DIFF', ots = Position(33129, 32736, 14)},
    {pos = Position(33127, 32594, 15), dest = Position(33131, 32566, 8), reason = 'DIFF', ots = Position(33132, 32570, 7)},
    {pos = Position(33130, 32736, 14), dest = Position(33125, 32760, 14), reason = 'DIFF', ots = Position(33124, 32760, 14)},
    {pos = Position(33146, 32668, 15), dest = Position(33206, 32592, 8), reason = 'DIFF', ots = Position(33208, 32589, 7)},
    {pos = Position(33149, 32869, 11), dest = Position(33159, 32838, 8), reason = 'DIFF', ots = Position(33160, 32836, 10)},
    {pos = Position(33150, 32864, 7), dest = Position(33147, 32864, 7), reason = 'MISSING_IN_OTS', ots = Position(0, 0, 0)},
    {pos = Position(33157, 32771, 15), dest = Position(33255, 32839, 9), reason = 'DIFF', ots = Position(33191, 32946, 15)},
    {pos = Position(33163, 32851, 11), dest = Position(33149, 32870, 11), reason = 'MISSING_IN_OTS', ots = Position(0, 0, 0)},
    {pos = Position(33175, 32937, 15), dest = Position(33255, 32836, 8), reason = 'DIFF', ots = Position(33254, 32833, 7)},
    {pos = Position(33178, 32664, 15), dest = Position(33128, 32656, 15), reason = 'DIFF', ots = Position(33118, 32627, 15)},
    {pos = Position(33179, 33018, 14), dest = Position(33025, 32872, 8), reason = 'DIFF', ots = Position(33028, 32869, 7)},
    {pos = Position(33183, 32717, 14), dest = Position(33231, 32705, 8), reason = 'DIFF', ots = Position(33232, 32704, 7)},
    {pos = Position(33183, 32757, 15), dest = Position(33190, 32947, 15), reason = 'DIFF', ots = Position(33184, 32768, 15)},
    {pos = Position(33184, 32767, 15), dest = Position(33158, 32771, 15), reason = 'DIFF', ots = Position(33183, 32756, 15)},
    {pos = Position(33193, 32908, 11), dest = Position(33179, 32880, 11), reason = 'DIFF', ots = Position(33179, 32879, 11)},
    {pos = Position(33194, 32664, 15), dest = Position(33206, 32592, 8), reason = 'DIFF', ots = Position(33130, 32656, 15)},
    {pos = Position(33198, 32887, 11), dest = Position(33159, 32838, 8), reason = 'MISSING_IN_OTS', ots = Position(0, 0, 0)},
    {pos = Position(33206, 32955, 14), dest = Position(33025, 32872, 8), reason = 'DIFF', ots = Position(33108, 33008, 14)},
    {pos = Position(33206, 32982, 14), dest = Position(33205, 33002, 14), reason = 'DIFF', ots = Position(33207, 33002, 14)},
    {pos = Position(33211, 32701, 13), dest = Position(33211, 32699, 14), reason = 'MISSING_IN_OTS', ots = Position(0, 0, 0)},
    {pos = Position(33212, 32699, 14), dest = Position(33211, 32700, 13), reason = 'MISSING_IN_OTS', ots = Position(0, 0, 0)},
    {pos = Position(33234, 31642, 13), dest = Position(33234, 31642, 14), reason = 'DIFF', ots = Position(33234, 31644, 14)},
    {pos = Position(33238, 32644, 14), dest = Position(33258, 32708, 13), reason = 'DIFF', ots = Position(33162, 32654, 14)},
    {pos = Position(33242, 32668, 14), dest = Position(33247, 32671, 13), reason = 'MISSING_IN_OTS', ots = Position(0, 0, 0)},
    {pos = Position(33244, 32691, 14), dest = Position(33249, 32693, 13), reason = 'MISSING_IN_OTS', ots = Position(0, 0, 0)},
    {pos = Position(33246, 32676, 14), dest = Position(33247, 32679, 13), reason = 'MISSING_IN_OTS', ots = Position(0, 0, 0)},
    {pos = Position(33247, 32700, 14), dest = Position(33254, 32698, 13), reason = 'MISSING_IN_OTS', ots = Position(0, 0, 0)},
    {pos = Position(33252, 32707, 14), dest = Position(33254, 32704, 13), reason = 'MISSING_IN_OTS', ots = Position(0, 0, 0)},
    {pos = Position(33255, 32688, 14), dest = Position(33254, 32685, 13), reason = 'MISSING_IN_OTS', ots = Position(0, 0, 0)},
    {pos = Position(33256, 32671, 14), dest = Position(33256, 32673, 13), reason = 'MISSING_IN_OTS', ots = Position(0, 0, 0)},
    {pos = Position(33256, 32694, 14), dest = Position(33257, 32691, 13), reason = 'MISSING_IN_OTS', ots = Position(0, 0, 0)},
    {pos = Position(33258, 32678, 14), dest = Position(33259, 32681, 13), reason = 'MISSING_IN_OTS', ots = Position(0, 0, 0)},
    {pos = Position(33259, 32708, 13), dest = Position(33231, 32705, 8), reason = 'MISSING_IN_OTS', ots = Position(0, 0, 0)},
    {pos = Position(33260, 32702, 14), dest = Position(33260, 32700, 13), reason = 'MISSING_IN_OTS', ots = Position(0, 0, 0)},
    {pos = Position(33264, 32691, 14), dest = Position(33264, 32695, 13), reason = 'MISSING_IN_OTS', ots = Position(0, 0, 0)},
    {pos = Position(33265, 32686, 14), dest = Position(33267, 32685, 13), reason = 'MISSING_IN_OTS', ots = Position(0, 0, 0)},
    {pos = Position(33269, 32665, 14), dest = Position(33264, 32671, 13), reason = 'MISSING_IN_OTS', ots = Position(0, 0, 0)},
    {pos = Position(33269, 32676, 14), dest = Position(33265, 32678, 13), reason = 'MISSING_IN_OTS', ots = Position(0, 0, 0)},
    {pos = Position(33350, 32830, 14), dest = Position(33280, 32740, 10), reason = 'DIFF', ots = Position(33282, 32742, 7)},
    {pos = Position(33368, 32805, 14), dest = Position(33280, 32740, 10), reason = 'DIFF', ots = Position(33397, 32835, 14)},
}

function onStartup()
    local applied, missing = 0, 0
    for _, fix in ipairs(FIXES) do
        local tile = Tile(fix.pos)
        if tile then
            local tp = tile:getItemById(TELEPORT_ID)
            if tp and tp:isTeleport() then
                tp:setDestination(fix.dest)
                applied = applied + 1
            else
                missing = missing + 1
            end
        else
            missing = missing + 1
        end
    end
    print(string.format('[TeleportFixups] applied=%d missing=%d', applied, missing))
end